/**
 * ============================================================================
 * Component: ‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÉ‡∏´‡∏°‡πà (SimpleForm.jsx)
 * ============================================================================
 * 
 * ‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏´‡∏•‡∏±‡∏Å:
 * - ‡πÅ‡∏™‡∏î‡∏á Popup Modal ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÉ‡∏´‡∏°‡πà
 * - ‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏á‡∏≤‡∏ô (‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á, ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó, ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô, ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î)
 * - ‡∏°‡∏µ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå AI ‡∏ä‡πà‡∏ß‡∏¢‡∏£‡πà‡∏≤‡∏á Job Description ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ (‡πÉ‡∏ä‡πâ Gemini API)
 * - ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏á Firestore Database
 * 
 * Props ‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏°‡∏≤:
 * - faculty: ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏ì‡∏∞‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å (Object ‡∏°‡∏µ id ‡πÅ‡∏•‡∏∞ name)
 * - onClose: ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏¥‡∏î Popup (‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏à‡∏≤‡∏Å App.jsx)
 * - onSubmit: ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏à‡∏≤‡∏Å App.jsx)
 * - userId: ID ‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠ (Firebase User ID)
 * 
 * Features:
 * - Form Validation: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏ä‡πâ AI
 * - AI Integration: ‡πÉ‡∏ä‡πâ Gemini AI ‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô Job Description
 * - Real-time Update: ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Dashboard ‡∏à‡∏∞‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
 * 
 * ============================================================================
 */

import React, { useState } from 'react';

// ============================================================================
// ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤ Icons ‡∏à‡∏≤‡∏Å lucide-react
// ============================================================================
// X: Icon ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏õ‡∏¥‡∏î Popup
import { X } from 'lucide-react';

// ============================================================================
// ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤ Firestore Functions
// ============================================================================
// collection: ‡∏™‡∏£‡πâ‡∏≤‡∏á Reference ‡πÑ‡∏õ‡∏¢‡∏±‡∏á Collection ‡πÉ‡∏ô Firestore
// addDoc: ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏û‡∏¥‡πà‡∏° Document ‡πÉ‡∏´‡∏°‡πà‡∏•‡∏á‡πÉ‡∏ô Collection
// serverTimestamp: ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡∏à‡∏≤‡∏Å Server
import { collection, addDoc, serverTimestamp } from 'firebase/firestore';

// ============================================================================
// ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤ Firebase Configuration
// ============================================================================
// db: Firestore Database Instance
// appId: ID ‡∏Ç‡∏≠‡∏á‡πÅ‡∏≠‡∏õ (‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏£‡πâ‡∏≤‡∏á Path ‡πÉ‡∏ô Firestore)
import { db, appId } from '../config/firebase';

// ============================================================================
// ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤ Gemini AI Utility
// ============================================================================
// callGemini: ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ Gemini AI API
import { callGemini } from '../utils/gemini';

// ============================================================================
// ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤ Local Storage Utility
// ============================================================================
// ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Demo Mode ‡πÄ‡∏°‡∏∑‡πà‡∏≠ Firebase ‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
import { addLocalRequest } from '../utils/localStorage';

/**
 * ============================================================================
 * Component SimpleForm
 * ============================================================================
 */
const SimpleForm = ({ faculty, onClose, onSubmit, userId }) => {
  // ========================================================================
  // State Management
  // ========================================================================
  // form: ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
  // - position: ‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏á‡∏≤‡∏ô (String)
  // - type: ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó ('new' = ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÉ‡∏´‡∏°‡πà, 'replacement' = ‡∏ó‡∏î‡πÅ‡∏ó‡∏ô)
  // - amount: ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á (Number)
  // - description: ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏á‡∏≤‡∏ô/‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥ (String)
  const [form, setForm] = useState({
    position: '',        // ‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏á‡∏≤‡∏ô (‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô: ‡∏ß‡πà‡∏≤‡∏á)
    type: 'new',        // ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó (‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô: 'new' = ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÉ‡∏´‡∏°‡πà)
    amount: 1,          // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô (‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô: 1 ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á)
    description: ''     // ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î (‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô: ‡∏ß‡πà‡∏≤‡∏á)
  });
  
  // aiLoading: ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î AI (true = ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô, false = ‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß)
  // ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô..." ‡∏ö‡∏ô‡∏õ‡∏∏‡πà‡∏° AI
  const [aiLoading, setAiLoading] = useState(false);

  // ========================================================================
  // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏Å AI ‡πÉ‡∏´‡πâ‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô Job Description
  // ========================================================================
  /**
   * handleAI: ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "‡πÉ‡∏´‡πâ AI ‡∏ä‡πà‡∏ß‡∏¢‡∏£‡πà‡∏≤‡∏á"
   * 
   * ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô:
   * 1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á
   * 2. ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏Å‡∏£‡∏≠‡∏Å -> ‡πÅ‡∏™‡∏î‡∏á Alert ‡πÅ‡∏•‡∏∞‡∏´‡∏¢‡∏∏‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
   * 3. ‡∏ñ‡πâ‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß -> ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å Gemini AI ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á Job Description
   * 4. ‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å AI ‡∏•‡∏á‡πÉ‡∏ô description
   */
  const handleAI = async () => {
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á
    if (!form.position) {
      alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Å‡πà‡∏≠‡∏ô');
      return;  // ‡∏´‡∏¢‡∏∏‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏Å‡∏£‡∏≠‡∏Å
    }
    
    // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ loading ‡πÄ‡∏õ‡πá‡∏ô true ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô..."
    setAiLoading(true);
    
    /**
     * ‡∏™‡∏£‡πâ‡∏≤‡∏á Prompt ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Gemini AI
     * Prompt: ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡πÉ‡∏´‡πâ AI ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ AI ‡∏™‡∏£‡πâ‡∏≤‡∏á Job Description
     * - ‡∏£‡∏∞‡∏ö‡∏∏‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏á‡∏≤‡∏ô
     * - ‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô Job Description ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥
     * - ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÉ‡∏´‡πâ‡∏™‡∏±‡πâ‡∏ô‡πÜ ‡πÄ‡∏õ‡πá‡∏ô‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£ ‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢
     */
    const prompt = `‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏á‡∏≤‡∏ô (Job Description) ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥ ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á "${form.position}" ‡∏™‡∏±‡πâ‡∏ô‡πÜ ‡πÄ‡∏õ‡πá‡∏ô‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£ ‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢`;
    
    /**
     * ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ Gemini AI API
     * callGemini ‡∏à‡∏∞‡∏™‡πà‡∏á Prompt ‡πÑ‡∏õ‡∏¢‡∏±‡∏á Gemini API ‡πÅ‡∏•‡∏∞‡∏£‡∏≠‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö
     */
    const aiResponse = await callGemini(prompt);
    
    /**
     * ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï State description ‡∏î‡πâ‡∏ß‡∏¢‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å AI
     * prev => ({ ...prev, description: aiResponse })
     * - ...prev: ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ñ‡πà‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡∏≠‡∏á form ‡πÄ‡∏î‡∏¥‡∏° (position, type, amount)
     * - description: ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏î‡πâ‡∏ß‡∏¢‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏´‡∏°‡πà‡∏à‡∏≤‡∏Å AI
     */
    setForm(prev => ({ ...prev, description: aiResponse }));
    
    // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ loading ‡πÄ‡∏õ‡πá‡∏ô false ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß
    setAiLoading(false);
  };

  // ========================================================================
  // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏á Firestore
  // ========================================================================
  /**
   * handleSubmit: ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•"
   * 
   * ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô:
   * 1. ‡∏™‡∏£‡πâ‡∏≤‡∏á Object ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÉ‡∏´‡∏°‡πà
   * 2. ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á Firestore Database
   * 3. ‡∏ñ‡πâ‡∏≤‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à -> ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å onSubmit ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏¥‡∏î Popup
   * 4. ‡∏ñ‡πâ‡∏≤‡πÄ‡∏Å‡∏¥‡∏î Error -> ‡πÅ‡∏™‡∏î‡∏á Alert ‡πÅ‡∏•‡∏∞‡∏´‡∏¢‡∏∏‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
   */
  // State ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Error Message
  const [errorMessage, setErrorMessage] = useState('');

  const handleSubmit = async () => {
    // Reset error message
    setErrorMessage('');

    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏≠‡∏Å
    if (!form.position || form.position.trim() === '') {
      setErrorMessage('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á');
      return;
    }

    // Debug: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ db
    console.log('üîç Debug: db status:', db ? 'Available' : 'Not Available (Demo Mode)');

    try {
      /**
       * ‡∏™‡∏£‡πâ‡∏≤‡∏á Object ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÉ‡∏´‡∏°‡πà
       * ‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢:
       * - ...form: ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏ü‡∏≠‡∏£‡πå‡∏° (position, type, amount, description)
       * - facultyId: ID ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏ì‡∏∞‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠
       * - facultyName: ‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏ì‡∏∞‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠
       * - status: ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô ('submitted' = ‡∏™‡πà‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÉ‡∏´‡πâ HR)
       * - createdAt: ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠
       * - userId: ID ‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠
       */
      const newRequest = {
        ...form,                    // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏ü‡∏≠‡∏£‡πå‡∏°
        position: form.position.trim(), // ‡∏ï‡∏±‡∏î‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤-‡∏´‡∏•‡∏±‡∏á
        facultyId: faculty.id,      // ID ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏ì‡∏∞
        facultyName: faculty.name,  // ‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏ì‡∏∞
        status: 'submitted',        // ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô: ‡∏™‡πà‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÉ‡∏´‡πâ HR ‡πÅ‡∏•‡πâ‡∏ß
        userId: userId || 'local-user'  // ID ‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
      };

      // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ db ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
      if (db) {
        // ‡πÉ‡∏ä‡πâ Firestore (Production Mode)
        newRequest.createdAt = serverTimestamp(); // ‡πÄ‡∏ß‡∏•‡∏≤‡∏à‡∏≤‡∏Å Server
        
        /**
         * ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á Firestore Database
         * 
         * collection(db, 'artifacts', appId, 'public', 'data', 'requests'):
         * - ‡∏™‡∏£‡πâ‡∏≤‡∏á Reference ‡πÑ‡∏õ‡∏¢‡∏±‡∏á Collection 'requests'
         * - Path: artifacts/{appId}/public/data/requests
         * 
         * addDoc(collectionRef, data):
         * - ‡πÄ‡∏û‡∏¥‡πà‡∏° Document ‡πÉ‡∏´‡∏°‡πà‡∏•‡∏á‡πÉ‡∏ô Collection
         * - Firestore ‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á Document ID ‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
         * - ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à Dashboard ‡∏à‡∏∞‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ (‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÉ‡∏ä‡πâ onSnapshot)
         */
        await addDoc(
          collection(db, 'artifacts', appId, 'public', 'data', 'requests'),
          newRequest
        );
      } else {
        // ‡πÉ‡∏ä‡πâ Local Storage (Demo Mode)
        console.log('‚úÖ ‡πÉ‡∏ä‡πâ Demo Mode: ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏á Local Storage');
        try {
          addLocalRequest(newRequest);
          console.log('‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÉ‡∏ô Local Storage');
          
          // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï Dashboard ‡πÇ‡∏î‡∏¢‡∏Å‡∏≤‡∏£ trigger custom event
          // Dashboard ‡∏à‡∏∞‡∏ü‡∏±‡∏á event ‡∏ô‡∏µ‡πâ‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
          window.dispatchEvent(new Event('localStorageUpdate'));
          console.log('‚úÖ Trigger localStorageUpdate event');
        } catch (localError) {
          console.error('‚ùå Error saving to Local Storage:', localError);
          setErrorMessage('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô Local Storage: ' + localError.message);
          return; // ‡∏´‡∏¢‡∏∏‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô ‡πÑ‡∏°‡πà‡∏õ‡∏¥‡∏î Popup
        }
      }
      
      /**
       * ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å onSubmit ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏¥‡∏î Popup
       * onSubmit ‡∏°‡∏≤‡∏à‡∏≤‡∏Å App.jsx ‡πÅ‡∏•‡∏∞‡∏à‡∏∞‡∏ó‡∏≥‡∏Å‡∏≤‡∏£ setShowForm(false)
       */
      onSubmit();
    } catch (error) {
      /**
       * ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Error ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
       * - ‡πÅ‡∏™‡∏î‡∏á Error ‡πÉ‡∏ô Console ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Developer
       * - ‡πÅ‡∏™‡∏î‡∏á Error Message ‡πÉ‡∏ô UI
       */
      console.error("Error creating request:", error);
      setErrorMessage("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•: " + (error.message || '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á'));
    }
  };

  // ========================================================================
  // Render: ‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• UI (Popup Modal)
  // ========================================================================
  // Overlay: ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏°‡∏∑‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏ô‡πâ‡∏ô Popup
  // fixed inset-0: ‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏•‡∏∏‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠
  // bg-black bg-opacity-50: ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏™‡∏µ‡∏î‡∏≥‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÉ‡∏™ 50%
  // flex items-center justify-center: ‡∏à‡∏±‡∏î‡πÉ‡∏´‡πâ Popup ‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á
  // z-50: ‡∏ß‡∏≤‡∏á‡πÑ‡∏ß‡πâ‡πÄ‡∏´‡∏ô‡∏∑‡∏≠ Elements ‡∏≠‡∏∑‡πà‡∏ô‡πÜ
  return (
    <div className="fixed inset-0 bg-pink-900 bg-opacity-70 backdrop-blur-sm flex items-center justify-center z-50 p-3 sm:p-4 overflow-y-auto">
      {/* 
        Popup Modal: ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏ü‡∏≠‡∏£‡πå‡∏°
        bg-white: ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏Ç‡∏≤‡∏ß
        rounded-lg: ‡∏°‡∏∏‡∏°‡πÇ‡∏Ñ‡πâ‡∏á
        max-w-lg: ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 32rem (512px)
        shadow-xl: ‡πÄ‡∏á‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏î‡πà‡∏ô‡∏ä‡∏±‡∏î
        responsive: w-full ‡∏ö‡∏ô mobile, max-w-lg ‡∏ö‡∏ô desktop
      */}
      <div className="bg-white rounded-xl sm:rounded-2xl w-full max-w-lg shadow-2xl border-2 border-pink-200 my-auto">
        {/* 
          ====================================================================
          ‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏±‡∏ß Popup: ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡πÅ‡∏•‡∏∞‡∏õ‡∏∏‡πà‡∏°‡∏õ‡∏¥‡∏î
          ====================================================================
        */}
        <div className="p-4 sm:p-5 border-b flex justify-between items-center bg-gradient-to-r from-pink-600 to-rose-600 rounded-t-xl sm:rounded-t-2xl sticky top-0 z-10">
          {/* ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ */}
          <h3 className="font-bold text-white text-base sm:text-lg">
            ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ç‡∏≠‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÉ‡∏´‡∏°‡πà
          </h3>
          {/* ‡∏õ‡∏∏‡πà‡∏°‡∏õ‡∏¥‡∏î (X) */}
          <button 
            onClick={onClose}  // ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å onClose ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏¥‡∏î Popup
            aria-label="‡∏õ‡∏¥‡∏î"
            className="text-white hover:bg-white/20 rounded-full p-1 transition flex-shrink-0"
          >
            <X size={18} className="sm:w-5 sm:h-5" />
          </button>
        </div>
        
        {/* 
          ====================================================================
          ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏ü‡∏≠‡∏£‡πå‡∏°
          ====================================================================
          space-y-4: ‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á Fields ‡πÉ‡∏ô‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á
        */}
        <div className="p-4 sm:p-6 space-y-4 max-h-[calc(100vh-200px)] overflow-y-auto">
          {/* 
            Field 1: ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô (‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏î‡πâ)
            disabled: ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏î‡πâ (‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡∏Ñ‡∏ì‡∏∞‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏≠‡∏ô Login)
          */}
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-1">
              ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô
            </label>
            <input 
              type="text" 
              disabled  // ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏î‡πâ
              value={faculty.name}  // ‡πÅ‡∏™‡∏î‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏ì‡∏∞‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏≠‡∏ô Login
              className="w-full bg-gray-100 border px-3 py-2 rounded text-sm"
            />
          </div>

          {/* 
            Field 2: ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö (Input ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°)
            required: ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÉ‡∏´‡πâ‡∏Å‡∏£‡∏≠‡∏Å (‡∏Ñ‡∏ß‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏° validation)
          */}
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-1">
              ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö
            </label>
              <input 
                type="text" 
                className="w-full border-2 border-pink-200 px-3 py-2 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500 focus:outline-none"
                value={form.position}
                onChange={e => setForm({...form, position: e.target.value})}  // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï position ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏û‡∏¥‡∏°‡∏û‡πå
                placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ"
              />
          </div>

          {/* 
            Field 3 & 4: ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÅ‡∏•‡∏∞‡∏à‡∏≥‡∏ô‡∏ß‡∏ô (‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏ñ‡∏ß‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô)
            flex space-x-4: ‡∏à‡∏±‡∏î‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏ñ‡∏ß‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô ‡∏°‡∏µ‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô
            responsive: flex-col ‡∏ö‡∏ô mobile, flex-row ‡∏ö‡∏ô desktop
          */}
          <div className="flex flex-col sm:flex-row gap-4 sm:space-x-4 sm:gap-0">
            {/* Field 3: ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó (Dropdown) */}
            <div className="flex-1">
              <label className="block text-sm font-medium text-gray-700 mb-1">
                ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó
              </label>
              <select 
                className="w-full border-2 border-pink-200 px-3 py-2 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500 focus:outline-none"
                value={form.type}
                onChange={e => setForm({...form, type: e.target.value})}  // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï type ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
              >
                <option value="new">‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÉ‡∏´‡∏°‡πà</option>
                <option value="replacement">‡∏ó‡∏î‡πÅ‡∏ó‡∏ô</option>
              </select>
            </div>
            {/* Field 4: ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô (Input ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç) */}
            <div className="w-full sm:w-1/3">
              <label className="block text-sm font-medium text-gray-700 mb-1">
                ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô
              </label>
              <input 
                type="number" 
                min="1"  // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥ 1
                className="w-full border-2 border-pink-200 px-3 py-2 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500 focus:outline-none"
                value={form.amount}
                onChange={e => {
                  const value = e.target.value;
                  // ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡∏ß‡πà‡∏≤‡∏á‡∏´‡∏£‡∏∑‡∏≠ NaN ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ 1
                  setForm({...form, amount: value === '' ? 1 : parseInt(value) || 1});
                }}  // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï amount ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏û‡∏¥‡∏°‡∏û‡πå
              />
            </div>
          </div>

          {/* 
            Field 5: ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î / ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥ (Textarea + ‡∏õ‡∏∏‡πà‡∏° AI)
          */}
          <div>
            {/* ‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏±‡∏ß: Label ‡πÅ‡∏•‡∏∞‡∏õ‡∏∏‡πà‡∏° AI */}
            <div className="flex justify-between items-center mb-1">
              <label className="block text-sm font-medium text-gray-700">
                ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î / ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥
              </label>
              {/* 
                ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏£‡∏µ‡∏¢‡∏Å AI
                disabled: ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠ AI ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
                aiLoading: ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á AI
              */}
                <button 
                  onClick={handleAI}  // ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å handleAI
                  disabled={aiLoading}  // ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠ AI ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
                  className="text-xs text-pink-700 border-2 border-pink-300 bg-pink-100 px-3 py-1.5 rounded-lg hover:bg-pink-200 disabled:opacity-50 transition font-medium shadow-sm"
                >
                  {aiLoading ? '‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô...' : '‚ú® ‡πÉ‡∏´‡πâ AI ‡∏ä‡πà‡∏ß‡∏¢‡∏£‡πà‡∏≤‡∏á'}
                </button>
            </div>
            {/* Textarea: ‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏á‡∏≤‡∏ô */}
             <textarea 
                rows="5"  // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÅ‡∏ñ‡∏ß 5 ‡πÅ‡∏ñ‡∏ß
                className="w-full border-2 border-pink-200 px-3 py-2 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500 focus:outline-none text-sm"
                value={form.description}
                onChange={e => setForm({...form, description: e.target.value})}  // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï description ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏û‡∏¥‡∏°‡∏û‡πå
                placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö..."
             />
          </div>

          {/* ‡πÅ‡∏™‡∏î‡∏á Error Message */}
          {errorMessage && (
            <div className="bg-red-50 border-2 border-red-300 text-red-800 px-4 py-3 rounded-lg text-sm flex items-start justify-between">
              <div className="flex-1">
                <div className="font-semibold mb-1">‚ö†Ô∏è ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î</div>
                <div>{errorMessage}</div>
              </div>
              <button 
                onClick={() => setErrorMessage('')}
                className="ml-3 text-red-600 hover:text-red-800 flex-shrink-0"
                aria-label="‡∏õ‡∏¥‡∏î"
              >
                <X size={18} />
              </button>
            </div>
          )}

          {/* ‡πÅ‡∏™‡∏î‡∏á Demo Mode Notice */}
          {!db && (
            <div className="bg-yellow-50 border-2 border-yellow-300 text-yellow-800 px-4 py-3 rounded-lg text-sm">
              <div className="font-semibold mb-1">‚ÑπÔ∏è ‡πÇ‡∏´‡∏°‡∏î Demo</div>
              <div className="text-xs">
                ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÉ‡∏ô Browser Local Storage ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
                <br />
                ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Firebase Config ‡πÉ‡∏ô index.html
              </div>
            </div>
          )}
        </div>

        {/* 
          ====================================================================
          ‡∏™‡πà‡∏ß‡∏ô‡∏õ‡∏∏‡πà‡∏°‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á: ‡∏õ‡∏∏‡πà‡∏°‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
          ====================================================================
          flex justify-end: ‡∏à‡∏±‡∏î‡πÉ‡∏´‡πâ‡∏õ‡∏∏‡πà‡∏°‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏≤‡∏á‡∏Ç‡∏ß‡∏≤
          space-x-3: ‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏õ‡∏∏‡πà‡∏°
        */}
        <div className="p-4 sm:p-5 border-t bg-pink-50 rounded-b-xl sm:rounded-b-2xl flex flex-col-reverse sm:flex-row justify-end gap-3 sm:space-x-3 sticky bottom-0">
          {/* ‡∏õ‡∏∏‡πà‡∏°‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å: ‡∏õ‡∏¥‡∏î Popup ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• */}
          <button 
            onClick={onClose}  // ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å onClose ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏¥‡∏î Popup
            className="px-4 sm:px-5 py-2.5 sm:py-2 text-pink-700 text-sm font-medium hover:bg-pink-100 rounded-lg transition border border-pink-300 w-full sm:w-auto"
          >
            ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
          </button>
          {/* ‡∏õ‡∏∏‡πà‡∏°‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•: ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏á Firestore */}
          <button 
            onClick={handleSubmit}  // ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å handleSubmit ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
            className="px-4 sm:px-5 py-2.5 sm:py-2 bg-gradient-to-r from-pink-600 to-rose-600 text-white text-sm font-medium rounded-lg hover:from-pink-700 hover:to-rose-700 transition shadow-md w-full sm:w-auto"
          >
            ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
          </button>
        </div>
      </div>
    </div>
  );
};

// ============================================================================
// Export Component
// ============================================================================
export default SimpleForm;

